(()=>{var e={195:()=>{Vue.component("v-cart",{props:["isCartShow","cartGoods","amount2","countGoods2"],template:'\n      <div class="cart">\n            <button @click="handleClick" type="button" class="cart-buttons">Корзина</button>\n            <div  v-if="isCartShow" class="cartitems">\n            <div v-for="item in cartGoods">\n            <h4>{{item.title}}</h4>\n            <p>{{item.price}} рублей за шт.</p>\n            <p>{{item.quantity}} шт.</p>\n            <h1>{{item.price*item.quantity}}</h1>\n            </div>\n            <div>\n            <h4 v-if="cartGoods.length!==0">Общая стоимость:{{amount2}}</h4>\n            <h4 v-if=" cartGoods.length!==0">Общее количество:{{countGoods2}}</h4>\n            </div>\n            </div>\n            <div>\n  \n        </div>\n      \n      </div>\n    ',methods:{handleClick(){this.$emit("reverse")}}})},905:()=>{Vue.component("v-error",{props:["message"],template:'\n      <div class="error">\n        Ошибка! {{ message }}\n      </div>\n    '})},733:()=>{console.log("start");const e=(e,t="GET",o={})=>new Promise(((s,n)=>{const a=new XMLHttpRequest;a.timeout=1e4,a.ontimeout=()=>{console.log("timeout!")},a.onreadystatechange=()=>{4===a.readyState&&(200===a.status?s(JSON.parse(a.responseText)):(console.log("Error!",a.responseText),n(a.responseText)))},a.open(t,`http://localhost:3000/api/${e}`),a.setRequestHeader("Content-Type","application/json"),a.send(JSON.stringify(o))}));new Vue({el:"#app",data:{goods:[],basketGoods:[],searchValue:"",show:!0,errorMessage:""},mounted(){this.fetchData(),this.fetchBasketData()},methods:{fetchData(){return new Promise(((t,o)=>{e("catalog").then((e=>{console.log(e),this.goods=e,t()}))}))},fetchBasketData(){return new Promise(((t,o)=>{e("basket").then((e=>{this.basketGoods=e,console.log(this),t()})).catch((e=>{this.errorMessage="Не удалось получить содержимое корзины!"}))}))},addToBasket(t){e("basket","POST",t).then((e=>{if(console.log("Result",e),!e.success)return void console.log("addToBasket Error");const o=this.basketGoods.findIndex((e=>e.id===t.id));o>-1?this.basketGoods[o].quantity+=1:this.basketGoods.push({...t,quantity:1})})).catch((e=>{this.errorMessage="Не удалось добавить список товаров!"}))},removeItem(t){e(`basket/${t}`,"DELETE").then((e=>{console.log("Result",e),e.success?(this.basketGoods=this.basketGoods.filter((e=>e.id!==parseInt(t))),console.log(this.basketGoods)):console.log("addToBasket Error")})).catch((e=>{this.errorMessage="Не удалось удалить элемент из корзины!"}))}},computed:{filteredGoods(){const e=new RegExp(this.searchValue.trim(),"i");return this.goods.filter((t=>e.test(t.title)))},totalPrice(){return this.goods.reduce(((e,t)=>e+t.price),0)}}})},235:()=>{Vue.component("v-goods",{props:["goods"],template:'\n      <main>\n          <section class="goods">\n              <v-item\n                v-for="item in goods"\n                v-bind:element="item"\n                v-on:addToBasket="handleAddToBasket"         v-on:removeItem="handleremoveItem"\n  \n              />\n              <div v-if="!goods.length" class="goods-empty">\n                  Нет данных\n              </div>\n          </section>\n      </main>\n    ',methods:{handleAddToBasket(e){this.$emit("add",e)},handleremoveItem(e){this.$emit("remove",e)}}})},44:()=>{Vue.component("v-header",{props:["search","isCartShow","cartGoods"],template:'\n      <header class="header d-flex">\n          <span class="logo">E-Shop</span>\n          <slot></slot>\n        </header>\n    '})},743:()=>{Vue.component("v-item",{props:["element"],template:'\n      <div class="item">\n      <img v-bind:src="element.image" />\n      <h4>{{element.title}}</h4>\n      <p>{{element.price}}</p>\n      <button type=" button" v-on:click="addToBasket(element)">Добавить в корзину</button>\n      <button type=" button" v-on:click="removeItem(element.id_product)">Убрать из корзины</button>\n      </div>\n    ',methods:{addToBasket(){this.$emit("addToBasket",this.element)},removeItem(){this.$emit("removeItem",this.element.id)}}})},533:()=>{Vue.component("search-good",{props:["value"],template:'\n    <input\n    v-on:input="newsearch"\n     type="text"  class="search" placeholder="Поиск товара..." />\n    ',methods:{newsearch(e){console.log(event.target.value),this.$emit("input",event.target.value)}}})}},t={};function o(s){if(t[s])return t[s].exports;var n=t[s]={exports:{}};return e[s](n,n.exports,o),n.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var s in t)o.o(t,s)&&!o.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";o(905),o(533),o(195),o(235),o(44),o(743),o(733)})()})();