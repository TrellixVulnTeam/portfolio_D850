(()=>{var e={807:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var o=n(645),r=n.n(o)()((function(e){return e[1]}));r.push([e.id,'*{font-family:"Nerko One", cursive;font-family:"Playfair Display", serif}*:focus{outline:none}header{border:3px solid #b92121;background-color:aliceblue;display:flex;justify-content:space-around;height:50px;align-items:center}header .cart{justify-content:space-around;display:flex;background-color:#deedff;font-size:20px}header .cart .cartitems{right:0;justify-content:space-around;display:flex;background-color:#deedff;font-size:20px;top:60px;position:absolute;margin:10px;border:1px solid #000;display:flex;align-items:center;justify-content:space-around}header .cart .cartitems div{border:1px solid #000;align-items:center;justify-content:space-around;display:flex;flex-direction:column;margin:10px}header button{border-radius:5px;cursor:pointer;height:40px;background-color:#aad3f8}header span{font-size:40px;font-weight:bold;color:#770404}header .search{width:100px;height:20px}.goods{align-content:center;display:grid;justify-content:center;grid-template-columns:repeat(auto-fill, minmax(150px, 20%));gap:32px;min-height:100vh}.goods .item{border:3px solid #881919;border-radius:15px;width:200px;display:flex;flex-direction:column;align-items:center;background-color:aliceblue}.goods .item button{cursor:pointer;border-radius:5px;background-color:#aad3f8}.goods .item img{margin:10px;width:inherit;height:150px;border:1px solid #000}\n',""]);const s=r},645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=e(t);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,o){"string"==typeof e&&(e=[[null,e,""]]);var r={};if(o)for(var s=0;s<this.length;s++){var i=this[s][0];null!=i&&(r[i]=!0)}for(var a=0;a<e.length;a++){var c=[].concat(e[a]);o&&r[c[0]]||(n&&(c[2]?c[2]="".concat(n," and ").concat(c[2]):c[2]=n),t.push(c))}},t}},379:(e,t,n)=>{"use strict";var o,r=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),s=[];function i(e){for(var t=-1,n=0;n<s.length;n++)if(s[n].identifier===e){t=n;break}return t}function a(e,t){for(var n={},o=[],r=0;r<e.length;r++){var a=e[r],c=t.base?a[0]+t.base:a[0],d=n[c]||0,l="".concat(c," ").concat(d);n[c]=d+1;var u=i(l),p={css:a[1],media:a[2],sourceMap:a[3]};-1!==u?(s[u].references++,s[u].updater(p)):s.push({identifier:l,updater:f(p,t),references:1}),o.push(l)}return o}function c(e){var t=document.createElement("style"),o=e.attributes||{};if(void 0===o.nonce){var s=n.nc;s&&(o.nonce=s)}if(Object.keys(o).forEach((function(e){t.setAttribute(e,o[e])})),"function"==typeof e.insert)e.insert(t);else{var i=r(e.insert||"head");if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(t)}return t}var d,l=(d=[],function(e,t){return d[e]=t,d.filter(Boolean).join("\n")});function u(e,t,n,o){var r=n?"":o.media?"@media ".concat(o.media," {").concat(o.css,"}"):o.css;if(e.styleSheet)e.styleSheet.cssText=l(t,r);else{var s=document.createTextNode(r),i=e.childNodes;i[t]&&e.removeChild(i[t]),i.length?e.insertBefore(s,i[t]):e.appendChild(s)}}function p(e,t,n){var o=n.css,r=n.media,s=n.sourceMap;if(r?e.setAttribute("media",r):e.removeAttribute("media"),s&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),e.styleSheet)e.styleSheet.cssText=o;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(o))}}var h=null,m=0;function f(e,t){var n,o,r;if(t.singleton){var s=m++;n=h||(h=c(t)),o=u.bind(null,n,s,!1),r=u.bind(null,n,s,!0)}else n=c(t),o=p.bind(null,n,t),r=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return o(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;o(e=t)}else r()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===o&&(o=Boolean(window&&document&&document.all&&!window.atob)),o));var n=a(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var o=0;o<n.length;o++){var r=i(n[o]);s[r].references--}for(var c=a(e,t),d=0;d<n.length;d++){var l=i(n[d]);0===s[l].references&&(s[l].updater(),s.splice(l,1))}n=c}}}},195:()=>{Vue.component("v-cart",{props:["isCartShow","cartGoods","amount2","countGoods2"],template:'\n      <div class="cart">\n            <button @click="handleClick" type="button" class="cart-buttons">Корзина</button>\n            <div  v-if="isCartShow" class="cartitems">\n            <div v-for="item in cartGoods">\n            <h4>{{item.title}}</h4>\n            <h4>{{item.price}} рублей за шт</h4>\n            <h4>{{item.quantity}} шт</h4>\n            <h1>{{item.price*item.quantity}}</h1>\n            </div>\n            <div>\n            <h4 v-if="cartGoods.length!==0">Общая стоимость:{{amount2}}</h4>\n            <h4 v-if=" cartGoods.length!==0">Общее количество:{{countGoods2}}</h4>\n            </div>\n            </div>\n            <div>\n        </div>\n      </div>\n    ',methods:{handleClick(){this.$emit("reverse")}}})},905:()=>{Vue.component("v-error",{props:["message"],template:'\n      <div class="error">\n        Ошибка! {{ message }}\n      </div>\n    '})},733:()=>{console.log("start");const e=(e,t="GET",n={})=>new Promise(((o,r)=>{const s=new XMLHttpRequest;s.timeout=1e4,s.ontimeout=()=>{console.log("timeout!")},s.onreadystatechange=()=>{4===s.readyState&&(200===s.status?o(JSON.parse(s.responseText)):(console.log("Error!",s.responseText),r(s.responseText)))},s.open(t,`http://localhost:3000/api/${e}`),s.setRequestHeader("Content-Type","application/json"),s.send(JSON.stringify(n))}));new Vue({el:"#app",data:{goods:[],basketGoods:[],searchValue:"",show:!0,errorMessage:""},mounted(){this.fetchData(),this.fetchBasketData()},methods:{fetchData(){return new Promise(((t,n)=>{e("catalog").then((e=>{console.log(e),this.goods=e,t()}))}))},fetchBasketData(){return new Promise(((t,n)=>{e("basket").then((e=>{this.basketGoods=e,console.log(this),t()})).catch((e=>{this.errorMessage="Не удалось получить содержимое корзины!"}))}))},addToBasket(t){e("basket","POST",t).then((e=>{if(console.log("Result",e),!e.success)return void console.log("addToBasket Error");const n=this.basketGoods.findIndex((e=>e.id===t.id));n>-1?this.basketGoods[n].quantity+=1:this.basketGoods.push({...t,quantity:1})})).catch((e=>{this.errorMessage="Не удалось добавить список товаров!"}))},removeItem(t){e(`basket/${t}`,"DELETE").then((e=>{console.log("Result",e),e.success?(this.basketGoods=this.basketGoods.filter((e=>e.id!==parseInt(t))),console.log(this.basketGoods)):console.log("addToBasket Error")})).catch((e=>{this.errorMessage="Не удалось удалить элемент из корзины!"}))}},computed:{filteredGoods(){const e=new RegExp(this.searchValue.trim(),"i");return this.goods.filter((t=>e.test(t.title)))},totalPrice(){return this.goods.reduce(((e,t)=>e+t.price),0)}}})},235:()=>{Vue.component("v-goods",{props:["goods"],template:'\n      <main>\n          <section class="goods">\n              <v-item\n                v-for="item in goods"\n                v-bind:element="item"\n                v-on:addToBasket="handleAddToBasket"         v-on:removeItem="handleremoveItem"\n  \n              />\n              <div v-if="!goods.length" class="goods-empty">\n                  Нет данных\n              </div>\n          </section>\n      </main>\n    ',methods:{handleAddToBasket(e){this.$emit("add",e)},handleremoveItem(e){this.$emit("remove",e)}}})},44:()=>{Vue.component("v-header",{props:["search","isCartShow","cartGoods"],template:'\n      <header class="header d-flex">\n          <span class="logo">E-Shop</span>\n          <slot></slot>\n        </header>\n    '})},743:()=>{Vue.component("v-item",{props:["element"],template:'\n      <div class="item">\n      <img v-bind:src="element.image" />\n      <h4>{{element.title}}</h4>\n      <p>{{element.price}}</p>\n      <button type=" button" v-on:click="addToBasket(element)">Добавить в корзину</button>\n      <button type=" button" v-on:click="removeItem(element.id_product)">Убрать из корзины</button>\n      </div>\n    ',methods:{addToBasket(){this.$emit("addToBasket",this.element)},removeItem(){this.$emit("removeItem",this.element.id)}}})},533:()=>{Vue.component("search-good",{props:["value"],template:'\n    <input\n    v-on:input="newsearch"\n     type="text"  class="search" placeholder="Поиск товара..." />\n    ',methods:{newsearch(e){console.log(event.target.value),this.$emit("input",event.target.value)}}})}},t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={id:o,exports:{}};return e[o](r,r.exports,n),r.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";n(905),n(533),n(195),n(235),n(44),n(743),n(733);var e=n(379),t=n.n(e),o=n(807);t()(o.Z,{insert:"head",singleton:!1}),o.Z.locals})()})();